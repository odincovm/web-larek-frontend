# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта

Проект разделён на три основных слоя:

- **Model (Модель)**  
  Отвечает за данные приложения — товары, корзина, заказы. На данном этапе основные сущности описаны как типы (интерфейсы в TypeScript), что обеспечивает строгую типизацию.

- **View (Представление)**  
  Отвечает за отображение пользовательского интерфейса. Компоненты представляют отдельные части интерфейса, например, карточки товара, корзину, форму оформления заказа и модальные окна.

- **Event Broker (Брокер событий)**  
  Связывает компоненты между собой посредством событий. Для реализации используется класс `EventEmitter`, который позволяет подписываться на события, отписываться и инициировать их.

---

## Основные компоненты

### 1. EventEmitter

**EventEmitter** обеспечивает работу с событиями в приложении.  
**Функционал:**
- `subscribe(event: string, callback: Function)` — подписка на событие.
- `unsubscribe(event: string, callback: Function)` — удаление подписки.
- `emit(event: string, data?: any)` — вызов всех слушателей, подписанных на событие.

### 2. Типы данных

На данном этапе ключевые сущности описаны как типы (интерфейсы), без реализации дополнительной логики. В будущем при необходимости можно перейти к полноценным классам.

#### **Product**

Определяет структуру товара.

```typescript
type Product {
  id: number;
  name: string;
  price: number;
  description: string;
  imageUrl: string;
}
```

### CartItem
Представляет элемент корзины.

```typescript
type CartItem {
  product: Product;
  quantity: number;
}
```

### Order
Определяет структуру заказа.

```typescript
type Order {
  id: number;
  items: CartItem[];
  totalPrice: number;
  paymentMethod: string;
  address: string;
}
```

## Описание компонентов интерфейса

### ProductCard
Отвечает за отображение карточки товара в каталоге.

- Использует тип `Product` для получения данных о товаре.
- При клике на карточку или кнопку «Купить» инициирует событие `ADD_TO_CART`, которое передается через `EventEmitter`.

### CartView
Отвечает за отображение корзины пользователя.

- Использует тип `CartItem` для отображения списка добавленных товаров.
- Обрабатывает события `ADD_TO_CART` и `REMOVE_FROM_CART` для обновления содержимого корзины.

### CheckoutForm
Форма оформления заказа.

- Содержит поля ввода для адреса доставки, выбора способа оплаты и контактной информации.
- Проводит базовую валидацию формы (проверяет, что обязательные поля не пусты).
- При успешном заполнении отправляет событие `CHECKOUT` для создания заказа.

### Modal
Универсальное модальное окно, используемое для показа подробной информации о товаре или подтверждения заказа.

- Закрывается при клике вне области окна или по нажатию кнопки «Закрыть».

## Взаимодействие компонентов через события

Компоненты связываются между собой с помощью `EventEmitter`. Ниже приведена таблица основных событий и их обработчиков:

| Событие          | Источник компонента | Получатель компонента   | Описание действия                                  |
|------------------|--------------------|-------------------------|---------------------------------------------------|
| `ADD_TO_CART`   | `ProductCard`       | `CartView / Модель корзины` | Добавление товара в корзину.                      |
| `REMOVE_FROM_CART` | `CartView`        | `Модель корзины`        | Удаление товара из корзины.                      |
| `CHECKOUT`      | `CheckoutForm`      | `Модель заказа`         | Создание заказа и обработка данных оформления.   |
| `ORDER_SUCCESS` | `Модель заказа`     | `CartView / CheckoutForm` | Очистка корзины и информирование пользователя.  |

